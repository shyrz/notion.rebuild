(this["webpackJsonpnotion.rebuilds"]=this["webpackJsonpnotion.rebuilds"]||[]).push([[0],{141:function(t,e,n){t.exports=n(483)},146:function(t,e,n){},150:function(t,e,n){},483:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),s=n(35),r=n.n(s),i=(n(146),n(40)),l=n(14),c=n(489),u=n(488),p=n(490),d=n(89),m=n(493),h=n(491),g=n(138),b=n(121),f=n.n(b),S=n(494),y=n(495),O=n(496),w=n(497),E=n(498);function v(t){try{var e=new URL(t).pathname.slice(-32);return e.match(/[0-9a-f]{32}/)?e:""}catch(n){return""}}n(150),c.a.Panel;function T(){var t=Object(a.useState)([]),e=Object(l.a)(t,2),n=e[0],s=e[1],r=Object(a.useState)(""),c=Object(l.a)(r,2),b=c[0],T=c[1],A=Object(a.useState)(""),_=Object(l.a)(A,2),G=_[0],x=_[1],C=Object(a.useState)(""),P=Object(l.a)(C,2),L=P[0],I=P[1],R=Object(a.useState)(""),M=Object(l.a)(R,2),k=M[0],U=M[1],j=Object(a.useState)(""),N=Object(l.a)(j,2),D=N[0],q=N[1],H=Object(a.useState)(""),F=Object(l.a)(H,2),Y=F[0],B=F[1],X=Object(a.useState)(!1),J=Object(l.a)(X,2),W=(J[0],J[1]),$=Object(a.useState)(!1),z=Object(l.a)($,2),K=z[0],Q=z[1],V=function(t){var e=t.domain,n=t.domainURL,a=t.slugs,o=t.pageTitle,s=t.pageDescription,r=t.customFonts,i=t.customScripts,c=e.replace(/^https?:\/\//gi,"");return"/"===c.slice(-1)&&(c=c.slice(0,c.length-1)),"/* CONFIGURATION STARTS HERE */\n/* Step 1: enter your domain name like fruitionsite.com */\nconst MY_DOMAIN = '".concat(c,"';\n\n/*\n * Step 2: enter your URL slug to page ID mapping\n * The key on the left is the slug (without the slash)\n * The value on the right is the Notion page ID\n */\nconst SLUG_TO_PAGE = {\n\t'': '").concat(v(n),"',\n").concat(a.map((function(t){var e=Object(l.a)(t,2),n=e[0],a=v(e[1]);return a&&n?"    '".concat(n,"': '").concat(a,"',\n"):""})).join(""),"\n};\n\n/* Step 3: enter your page title and description for SEO purposes */\nconst PAGE_TITLE = '").concat(o||"","';\nconst PAGE_DESCRIPTION = '").concat(s||"","';\n\n/* Step 4: enter a Google Font name, you can choose from https://fonts.google.com */\nconst CUSTOM_FONTS = '").concat(r||"","';\n\n/* Step 5: enter any custom scripts you'd like */\nconst CUSTOM_SCRIPTS = `").concat(i||"","`;\n\n/* CONFIGURATION ENDS HERE */\n\nconst PAGE_TO_SLUG = {};\nconst slugs = [];\nconst pages = [];\nObject.keys(SLUG_TO_PAGE).forEach(slug => {\n\tconst page = SLUG_TO_PAGE[slug];\n\tslugs.push(slug);\n\tpages.push(page);\n\tPAGE_TO_SLUG[page] = slug;\n});\n\naddEventListener('fetch', event => {\n\tevent.respondWith(fetchAndApply(event.request));\n});\n\nfunction generateSitemap() {\n\tlet sitemap = '<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">';\n\tslugs.forEach(\n\t\t(slug) =>\n\t\t\t(sitemap +=\n\t\t\t\t'<url><loc>https://' + MY_DOMAIN + '/' + slug + '</loc></url>')\n\t);\n\tsitemap += '</urlset>';\n\treturn sitemap;\n}\n\nconst corsHeaders = {\n\t'Access-Control-Allow-Origin': '*',\n\t'Access-Control-Allow-Methods': 'GET, HEAD, POST, PUT, OPTIONS',\n\t'Access-Control-Allow-Headers': 'Content-Type',\n};\n\nfunction handleOptions(request) {\n\tif (request.headers.get('Origin') !== null &&\n\t\trequest.headers.get('Access-Control-Request-Method') !== null &&\n\t\trequest.headers.get('Access-Control-Request-Headers') !== null) {\n\t\t// Handle CORS pre-flight request.\n\t\treturn new Response(null, {\n\t\t\theaders: corsHeaders\n\t\t});\n\t} else {\n\t\t// Handle standard OPTIONS request.\n\t\treturn new Response(null, {\n\t\t\theaders: {\n\t\t\t\t'Allow': 'GET, HEAD, POST, PUT, OPTIONS',\n\t\t\t}\n\t\t});\n\t}\n}\n\nasync function fetchAndApply(request) {\n\tif (request.method === 'OPTIONS') {\n\t\treturn handleOptions(request);\n\t}\n\tlet url = new URL(request.url);\n\turl.hostname = 'www.notion.so';\n\tif (url.pathname === '/robots.txt') {\n\t\treturn new Response('Sitemap: https://' + MY_DOMAIN + '/sitemap.xml');\n\t}\n\tif (url.pathname === '/sitemap.xml') {\n\t\tlet response = new Response(generateSitemap());\n\t\tresponse.headers.set('content-type', 'application/xml');\n\t\treturn response;\n\t}\n\tlet response;\n\tif (url.pathname.startsWith('/app') && url.pathname.endsWith('js')) {\n\t\tresponse = await fetch(url.toString());\n\t\tlet body = await response.text();\n\t\tresponse = new Response(body.replace(/www.notion.so/g, MY_DOMAIN).replace(/notion.so/g, MY_DOMAIN), response);\n\t\tresponse.headers.set('Content-Type', 'application/x-javascript');\n\t\treturn response;\n\t} else if ((url.pathname.startsWith('/api'))) {\n\t\t// Forward API\n\t\tresponse = await fetch(url.toString(), {\n\t\t\tbody: request.body,\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json;charset=UTF-8',\n\t\t\t\t'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36'\n\t\t\t},\n\t\t\tmethod: 'POST',\n\t\t});\n\t\tresponse = new Response(response.body, response);\n\t\tresponse.headers.set('Access-Control-Allow-Origin', '*');\n\t\treturn response;\n\t} else if (slugs.indexOf(url.pathname.slice(1)) > -1) {\n\t\tconst pageId = SLUG_TO_PAGE[url.pathname.slice(1)];\n\t\treturn Response.redirect('https://' + MY_DOMAIN + '/' + pageId, 301);\n\t} else {\n\t\tresponse = await fetch(url.toString(), {\n\t\t\tbody: request.body,\n\t\t\theaders: request.headers,\n\t\t\tmethod: request.method,\n\t\t});\n\t\tresponse = new Response(response.body, response);\n\t\tresponse.headers.delete('Content-Security-Policy');\n\t\tresponse.headers.delete('X-Content-Security-Policy');\n\t}\n\n\treturn appendJavascript(response, SLUG_TO_PAGE);\n}\n\nclass MetaRewriter {\n\telement(element) {\n\t\tif (PAGE_TITLE !== '') {\n\t\t\tif (element.getAttribute('property') === 'og:title'\n\t\t\t\t|| element.getAttribute('name') === 'twitter:title') {\n\t\t\t\telement.setAttribute('content', PAGE_TITLE);\n\t\t\t}\n\t\t\tif (element.tagName === 'title') {\n\t\t\t\telement.setInnerContent(PAGE_TITLE);\n\t\t\t}\n\t\t}\n\t\tif (PAGE_DESCRIPTION !== '') {\n\t\t\tif (element.getAttribute('name') === 'description'\n\t\t\t\t|| element.getAttribute('property') === 'og:description'\n\t\t\t\t|| element.getAttribute('name') === 'twitter:description') {\n\t\t\t\telement.setAttribute('content', PAGE_DESCRIPTION);\n\t\t\t}\n\t\t}\n\t\tif (element.getAttribute('property') === 'og:url'\n\t\t\t|| element.getAttribute('name') === 'twitter:url') {\n\t\t\telement.setAttribute('content', MY_DOMAIN);\n\t\t}\n\t\tif (element.getAttribute('name') === 'apple-itunes-app') {\n\t\t\telement.remove();\n\t\t}\n\t}\n}\n\nclass HeadRewriter {\n\telement(element) {\n\t\tif (CUSTOM_FONTS !== '') {\n\t\t\telement.append(`<link href=\"https://fonts.googleapis.com/css?family=${CUSTOM_FONTS.replace(' ', '+')}:Regular,Bold,Italic&display=swap\" rel=\"stylesheet\">\n\t\t\t<style>* { font-family: \"${CUSTOM_FONTS}\" !important; }</style>`, {\n\t\t\t\thtml: true\n\t\t\t});\n\t\t}\n\t\telement.append(`<style>\n\t\tdiv.notion-topbar > div > div:nth-child(3) { display: none !important; }\n\t\tdiv.notion-topbar > div > div:nth-child(4) { display: none !important; }\n\t\tdiv.notion-topbar > div > div:nth-child(5) { display: none !important; }\n\t\tdiv.notion-topbar > div > div:nth-child(6) { display: none !important; }\n\t\tdiv.notion-topbar-mobile > div:nth-child(3) { display: none !important; }\n\t\tdiv.notion-topbar-mobile > div:nth-child(4) { display: none !important; }\n\t\tdiv.notion-topbar > div > div:nth-child(1n).toggle-mode { display: block !important; }\n\t\tdiv.notion-topbar-mobile > div:nth-child(1n).toggle-mode { display: block !important; }\n\t\t</style>`, {\n\t\t\thtml: true\n\t\t})\n\t}\n}\n\nclass BodyRewriter {\n\tconstructor(SLUG_TO_PAGE) {\n\t\tthis.SLUG_TO_PAGE = SLUG_TO_PAGE;\n\t}\n\telement(element) {\n\t\telement.append(`<div style=\"display:none\">Powered by <a href=\"http://fruitionsite.com\">Fruition</a></div>\n\t\t<script>\n\t\tconst SLUG_TO_PAGE = ${JSON.stringify(this.SLUG_TO_PAGE)};\n\t\tconst PAGE_TO_SLUG = {};\n\t\tconst slugs = [];\n\t\tconst pages = [];\n\t\tconst el = document.createElement('div');\n\t\tlet redirected = false;\n\t\tObject.keys(SLUG_TO_PAGE).forEach(slug => {\n\t\t\tconst page = SLUG_TO_PAGE[slug];\n\t\t\tslugs.push(slug);\n\t\t\tpages.push(page);\n\t\t\tPAGE_TO_SLUG[page] = slug;\n\t\t});\n\t\tfunction getPage() {\n\t\t\treturn location.pathname.slice(-32);\n\t\t}\n\t\tfunction getSlug() {\n\t\t\treturn location.pathname.slice(1);\n\t\t}\n\t\tfunction updateSlug() {\n\t\t\tconst slug = PAGE_TO_SLUG[getPage()];\n\t\t\tif (slug != null) {\n\t\t\t\thistory.replaceState(history.state, '', '/' + slug);\n\t\t\t}\n\t\t}\n\t\tfunction onDark() {\n\t\t\tel.innerHTML = '<div title=\"Change to Light Mode\" style=\"margin-left: auto; margin-right: 14px; min-width: 0px;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 120ms ease-in 0s; cursor: pointer; border-radius: 44px;\"><div style=\"display: flex; flex-shrink: 0; height: 14px; width: 26px; border-radius: 44px; padding: 2px; box-sizing: content-box; background: rgb(46, 170, 220); transition: background 200ms ease 0s, box-shadow 200ms ease 0s;\"><div style=\"width: 14px; height: 14px; border-radius: 44px; background: white; transition: transform 200ms ease-out 0s, background 200ms ease-out 0s; transform: translateX(12px) translateY(0px);\"></div></div></div></div>';\n\t\t\tdocument.body.classList.add('dark');\n\t\t\t__console.environment.ThemeStore.setState({ mode: 'dark' });\n\t\t};\n\t\tfunction onLight() {\n\t\t\tel.innerHTML = '<div title=\"Change to Dark Mode\" style=\"margin-left: auto; margin-right: 14px; min-width: 0px;\"><div role=\"button\" tabindex=\"0\" style=\"user-select: none; transition: background 120ms ease-in 0s; cursor: pointer; border-radius: 44px;\"><div style=\"display: flex; flex-shrink: 0; height: 14px; width: 26px; border-radius: 44px; padding: 2px; box-sizing: content-box; background: rgba(135, 131, 120, 0.3); transition: background 200ms ease 0s, box-shadow 200ms ease 0s;\"><div style=\"width: 14px; height: 14px; border-radius: 44px; background: white; transition: transform 200ms ease-out 0s, background 200ms ease-out 0s; transform: translateX(0px) translateY(0px);\"></div></div></div></div>';\n\t\t\tdocument.body.classList.remove('dark');\n\t\t\t__console.environment.ThemeStore.setState({ mode: 'light' });\n\t\t}\n\t\tfunction toggle() {\n\t\t\tif (document.body.classList.contains('dark')) {\n\t\t\t\tonLight();\n\t\t\t} else {\n\t\t\t\tonDark();\n\t\t\t}\n\t\t}\n\t\tfunction addDarkModeButton(device) {\n\t\t\tconst nav = device === 'web' ? document.querySelector('.notion-topbar').firstChild : document.querySelector('.notion-topbar-mobile');\n\t\t\tel.className = 'toggle-mode';\n\t\t\tel.addEventListener('click', toggle);\n\t\t\tnav.appendChild(el);\n\t\t\tonLight();\n\t\t}\n\t\tconst observer = new MutationObserver(function() {\n\t\t\tif (redirected) return;\n\t\t\tconst nav = document.querySelector('.notion-topbar');\n\t\t\tconst mobileNav = document.querySelector('.notion-topbar-mobile');\n\t\t\tif (nav && nav.firstChild && nav.firstChild.firstChild\n\t\t\t\t|| mobileNav && mobileNav.firstChild) {\n\t\t\t\tredirected = true;\n\t\t\t\tupdateSlug();\n\t\t\t\taddDarkModeButton(nav ? 'web' : 'mobile');\n\t\t\t\tconst onpopstate = window.onpopstate;\n\t\t\t\twindow.onpopstate = function() {\n\t\t\t\t\tif (slugs.includes(getSlug())) {\n\t\t\t\t\t\tconst page = SLUG_TO_PAGE[getSlug()];\n\t\t\t\t\t\tif (page) {\n\t\t\t\t\t\t\thistory.replaceState(history.state, 'bypass', '/' + page);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tonpopstate.apply(this, [].slice.call(arguments));\n\t\t\t\t\tupdateSlug();\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tobserver.observe(document.querySelector('#notion-app'), {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t});\n\t\tconst replaceState = window.history.replaceState;\n\t\twindow.history.replaceState = function(state) {\n\t\t\tif (arguments[1] !== 'bypass' && slugs.includes(getSlug())) return;\n\t\t\treturn replaceState.apply(window.history, arguments);\n\t\t};\n\t\tconst pushState = window.history.pushState;\n\t\twindow.history.pushState = function(state) {\n\t\t\tconst dest = new URL(location.protocol + location.host + arguments[2]);\n\t\t\tconst id = dest.pathname.slice(-32);\n\t\t\tif (pages.includes(id)) {\n\t\t\t\targuments[2] = '/' + PAGE_TO_SLUG[id];\n\t\t\t}\n\t\t\treturn pushState.apply(window.history, arguments);\n\t\t};\n\t\tconst open = window.XMLHttpRequest.prototype.open;\n\t\twindow.XMLHttpRequest.prototype.open = function() {\n\t\t\targuments[1] = arguments[1].replace('${MY_DOMAIN}', 'www.notion.so');\n\t\t\treturn open.apply(this, [].slice.call(arguments));\n\t\t};\n\t<\/script>${CUSTOM_SCRIPTS}`, {\n\t\t\thtml: true\n\t\t});\n\t}\n}\n\nasync function appendJavascript(res, SLUG_TO_PAGE) {\n\treturn new HTMLRewriter()\n\t\t.on('title', new MetaRewriter())\n\t\t.on('meta', new MetaRewriter())\n\t\t.on('head', new HeadRewriter())\n\t\t.on('body', new BodyRewriter(SLUG_TO_PAGE))\n\t\t.transform(res);\n}")}({domain:b,domainURL:G,slugs:n,pageTitle:L,pageDescription:k,customFonts:D,customScripts:Y});Object(a.useRef)("");return o.a.createElement("div",{className:"App"},o.a.createElement(u.a,{name:"code-generate-form",layout:"vertical",onFinish:function(t){console.log("Received values of form:",t)}},o.a.createElement(u.a.Item,{label:"Domain"},o.a.createElement(p.a,{placeholder:"example.com",onChange:function(t){T(t.target.value),Q(!1)}})),o.a.createElement(u.a.Item,{label:"Notion URL for Domain"},o.a.createElement(p.a,{placeholder:"https://www.notion.so/Notion-Rebuild-adeb571cc8004db19f2a425f19eab678",onChange:function(t){x(t.target.value),Q(!1)}})),o.a.createElement(u.a.Item,{label:"Pretty Links"},o.a.createElement(u.a.List,null,(function(t,e){e.add,e.remove;return o.a.createElement(o.a.Fragment,null,n.map((function(t,e){var a=Object(l.a)(t,2);a[0],a[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a.Item,{rules:[{required:!0,message:"Missing Slug"}]},o.a.createElement(p.a.Group,{compact:!0},o.a.createElement(p.a,{prefix:"/",placeholder:"slug",onChange:function(t){return function(t,e){s([].concat(Object(i.a)(n.slice(0,e)),[[t,n[e][1]]],Object(i.a)(n.slice(e+1)))),Q(!1)}(t.target.value,e)},style:{width:"30%"}}),o.a.createElement(p.a,{placeholder:"URL",onChange:function(t){return function(t,e){s([].concat(Object(i.a)(n.slice(0,e)),[[n[e][0],t]],Object(i.a)(n.slice(e+1)))),Q(!1)}(t.target.value,e)},style:{width:"calc(70% - 32px)"}}),o.a.createElement(d.a,{type:"text",icon:o.a.createElement(S.a,null),style:{width:"32px"},onClick:function(){!function(t){s([].concat(Object(i.a)(n.slice(0,t)),Object(i.a)(n.slice(t+1)))),Q(!1)}(e)},danger:!0}))))})))})),o.a.createElement(d.a,{type:"dashed",onClick:function(){s([].concat(Object(i.a)(n),[["",""]])),Q(!1)},block:!0},o.a.createElement(y.a,null)," Add Pretty Link")),o.a.createElement(u.a.Item,{label:"Page"},o.a.createElement(p.a.Group,null,o.a.createElement(p.a,{placeholder:"Title",onChange:function(t){I(t.target.value),Q(!1)}}),o.a.createElement(p.a.TextArea,{placeholder:"Description",onChange:function(t){U(t.target.value),Q(!1)}}))),o.a.createElement(u.a.Item,{label:"Custom Fonts"},o.a.createElement(p.a,{placeholder:"Rubik, Noto Sans SC...",onChange:function(t){q(t.target.value),Q(!1)}})),o.a.createElement(u.a.Item,{label:"Custom Scripts"},o.a.createElement(p.a.TextArea,{placeholder:"Google Analytics...",onChange:function(t){B(t.target.value),Q(!1)}})),o.a.createElement(u.a.Item,{label:"Use Dark Mode"},o.a.createElement(m.a,{checkedChildren:o.a.createElement(O.a,null),unCheckedChildren:o.a.createElement(w.a,null),onChange:function(t){W(t)}})),o.a.createElement(u.a.Item,null,o.a.createElement(f.a,{text:V,onCopy:function(){return Q(!0)}},o.a.createElement(d.a,{type:"primary",icon:K?o.a.createElement(E.a,null):null},K?"Copied!":"COPY THE CODE")),o.a.createElement(h.a,{language:"javascript",style:g.a,customStyle:{maxHeight:"100vh",border:"1px solid #d9d9d9",borderRadius:"3px"}},V))))}r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(T,null)),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.f42fdb31.chunk.js.map